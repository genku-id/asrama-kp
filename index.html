<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ASRAMA KULON PROGO</title>
    <link rel="stylesheet" href="style.css">
    
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <header>
        <div class="logo">ASRAMA KP</div>
        <div class="menu-container">
            <button id="menu-btn">â‹®</button>
            <div id="menu-dropdown" class="hidden">
                <button id="btn-logout-nav">LogOut Panitia</button>
                <button id="btn-admin-nav">Rekap Kehadiran</button>
            </div>
        </div>
    </header>

    <main id="app-content">
        <section id="pendaftar-section" class="card">
            <div id="loading-initial">Memuat Aplikasi...</div>
        </section>

        <section id="scanner-section" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:black; z-index:10000; display:flex; flex-direction:column; align-items:center;">
            <div id="reader" style="width:100%; max-width:500px;"></div>
            <div style="position:absolute; bottom:50px; display:flex; flex-direction:column; align-items:center; gap:20px; width:100%;">
                <button onclick="window.stopScanner()" style="background:#dc3545; color:white; border:none; padding:15px 40px; border-radius:30px; font-weight:bold; cursor:pointer; font-size:16px;">BATAL / KEMBALI</button>
            </div>
        </section>
    </main>

    <div id="success-overlay" style="display:none;"></div>

    <script type="module" src="app.js"></script>
    
    <script>
        // Logika Dropdown Menu
        const menuBtn = document.getElementById('menu-btn');
        const dropdown = document.getElementById('menu-dropdown');
        
        if(menuBtn) {
            menuBtn.onclick = (e) => {
                e.stopPropagation();
                dropdown.classList.toggle('hidden');
            };
        }

        window.onclick = () => {
            if(dropdown) dropdown.classList.add('hidden');
        };

        // Fungsi Logout Sederhana
        document.getElementById('btn-logout-nav').onclick = () => {
            localStorage.removeItem('isPanitia');
            location.reload();
        };
    </script>
</body>
</html>
